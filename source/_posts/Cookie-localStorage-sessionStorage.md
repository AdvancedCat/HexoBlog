---
title: 'Cookie,localStorage,sessionStorage简单分析'
date: 2017-04-10 22:58:42
tags: [Javascript,storage]
---

# 基本概念
1.**Cookie**
网站为了辨别用户身份而储存在用户本地终端上的数据（通常经过加密）

2.**web storage**
包括localStorage和sessionStorage。HTML5的产物，两者均用于本地储存数据。前者永久保存（除非手动删除），后者用于会话内（窗口存活期内）保存。

兼容情况：

|特性|Chrome|Firefox|IE|Opera|Safari|
|---|----|----|----|----|----|
|localStorage|4|3.5|8|10.50|4|
|sessionStorage|5|2|8|10.50|4|

# 三者的异同

|特性|Cookie|localStorage|sessionStorage|
|--|--|--|--|
|数据的生命期|可设置失效时间，默认是关闭浏览器后失效|除非被清除，否则永久保存|仅在当前会话下有效，关闭页面或浏览器后被清除|
|存放数据大小|4K左右|一般为5MB|一般为5MB|
|与服务器端通信|每次都会携带在HTTP头中，如果使用cookie保存过多数据会带来性能问题|仅在客户端（即浏览器）中保存，不参与和服务器的通信|仅在客户端（即浏览器）中保存，不参与和服务器的通信|
|易用性|需要程序员自己封装，源生的Cookie接口不友好|源生接口可以接受，亦可再次封装来对Object和Array有更好的支持|源生接口可以接受，亦可再次封装来对Object和Array有更好的支持|

# 应用场景
1.Cookie
针对登录过的用户，服务器端会在他登录时往 Cookie 中插入一段加密过的唯一辨识单一用户的辨识码，下次只要读取这个值就可以判断当前用户是否登录啦。

2.web storage
localStorage可以存储用户本地浏览的记录等。如果遇到一些内容特别多的表单，为了优化用户体验，我们可能要把表单页面拆分成多个子页面，然后按步骤引导用户填写。这时候 sessionStorage 的作用就发挥出来了。

# 安全性
需要注意的是，不是什么数据都适合放在 Cookie、localStorage 和 sessionStorage 中的。使用它们的时候，需要时刻注意是否有代码存在 XSS 注入的风险。因为只要打开控制台，你就随意修改它们的值，也就是说如果你的网站中有 XSS 的风险，它们就能对你的 localStorage 肆意妄为。所以千万不要用它们存储你系统中的敏感数据。